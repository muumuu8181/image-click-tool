# 🖱️ 画像クリックツール

[![GitHub release](https://img.shields.io/github/v/release/muumuu8181/image-click-tool)](https://github.com/muumuu8181/image-click-tool/releases)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Python 3.x](https://img.shields.io/badge/python-3.x-blue.svg)](https://www.python.org/downloads/)

スクリーンショットを撮影して、画面上の特定の画像を自動でクリックできるPython製GUIツールです。

**🎯 現在のバージョン：** v0.15.0 (config.jsonで管理)

## 🚀 主な機能

### 🔵 基本機能
- スクリーンショット撮影と範囲選択
- 保存した画像の自動クリック
- 信頼度調整による精度制御

### 🟢 複数選択機能  
- 一度のスクリーンショットで複数範囲を連続選択
- 色分け表示（赤→青→緑→黄色...）
- 連番ファイル名での自動保存

### 🟡 ワークフロー記録機能
- 操作手順を記録して自動化
- スクリーンショット→クリックを自動セット
- 待機時間の挿入
- ワークフローの保存・読み込み

## 📁 フォルダ構造

```
image-click-tool/
├── gui_app.py               # メインアプリケーション
├── config.json              # アプリ設定（バージョン情報含む）
├── image_clicker.py          # 画像クリック処理
├── images/                   # スクリーンショット保存フォルダ
│   ├── target.png
│   └── workflow_*.png
├── workflows/                # ワークフロー保存フォルダ
│   ├── google_search.json
│   └── workflow_*.json
├── example_usage.py          # 使用例
├── test_target.py           # テストスクリプト
├── requirements.txt         # 依存パッケージ
└── README.md               # このファイル
```

## 🛠️ インストール

### 必要な依存パッケージ
```bash
pip install pyautogui pillow opencv-python
```

### 起動方法
```bash
python gui_app.py
```

## 📖 使い方

### 🔵 基本機能
1. **スクリーンショット撮影**: `📷 スクリーンショットを撮る`をクリック
2. **範囲選択**: 3秒後に撮影 → ドラッグで赤枠選択
3. **ファイル名入力**: 保存したい名前を入力
4. **自動クリック**: 保存した画像を選択 → `🖱️ 選択した画像をクリック`

### 🟢 複数選択機能
1. **設定**: 選択数（2-8個）とベース名を入力
2. **撮影**: `📷 複数範囲を選択して保存`をクリック
3. **連続選択**: 1個目→赤枠、2個目→青枠、3個目→緑枠...
4. **完了**: Enterキーで終了、連番ファイルで自動保存

### 🟡 ワークフロー記録機能

#### 基本の流れ
1. **名前入力**: ワークフロー名を入力（空白の場合は自動命名）
2. **記録開始**: `⏺️ 記録開始`をクリック
3. **操作記録**: 
   - `📸 スクショ＋クリック` → 画像撮影＋クリック操作を記録
   - `⏸️ 待機追加` → 必要に応じて待機時間を追加
4. **記録停止**: `⏹️ 記録停止` → 自動でワークフローを保存
5. **実行**: `▶️ ワークフロー実行` → 記録した順番で自動実行

#### Google検索の自動化例
1. ワークフロー名: "google_search"
2. 記録開始
3. Google検索ボックスを `📸 スクショ＋クリック`
4. `⏸️ 待機追加` で2秒待機
5. 検索ボタンを `📸 スクショ＋クリック`
6. 記録停止 → 自動保存
7. 実行 → Google検索が自動で実行される！

## 💡 Tips

### 信頼度の調整
- **0.5～0.7**: 曖昧な一致でもOK（高速）
- **0.8～0.9**: 標準的な精度（推奨）
- **0.95～1.0**: 完全一致に近い（高精度）

### トラブルシューティング
- **画像が見つからない**: 信頼度を下げる、画像を撮り直す
- **クリック位置がずれる**: 画面拡大率を100%に設定
- **動作が遅い**: タイムアウト時間を短くする

## 📝 ワークフロー仕様

### ファイル形式
ワークフローはJSONファイルとして `workflows/` フォルダに保存されます。

```json
{
  "name": "google_search",
  "created": "2025-09-01T12:00:00",
  "steps_count": 4,
  "workflow": [
    {
      "step": 0,
      "type": "screenshot",
      "timestamp": "2025-09-01T12:00:01",
      "data": {
        "filename": "workflow_0_1725168001.png",
        "coords": [100, 200, 300, 250]
      }
    },
    {
      "step": 1,
      "type": "click",
      "timestamp": "2025-09-01T12:00:02",
      "data": {
        "image": "workflow_0_1725168001.png",
        "confidence": 0.8
      }
    }
  ]
}
```

### 操作タイプ
- **screenshot**: スクリーンショット撮影
- **click**: 画像クリック
- **wait**: 待機時間

## 🔧 開発情報

### バージョン管理
バージョン情報は `config.json` で管理されています。Gitのタグでもバージョンを管理し、適切な履歴を保持しています。

#### バージョン履歴 (config.jsonより)
- **v0.15.0**: ワークフロー名前入力、自動保存、フォルダ整理
- **v0.14.0**: ワークフロー簡素化（スクショ→自動でクリック追加）
- **v0.13.0**: タブ内完結、改行修正
- **v0.12.0**: 色分けタブ、詳細説明追加
- **v0.11.0**: 複数選択、ワークフロー記録機能
- **v0.1.0**: 基本機能（スクショ、クリック）

### 使用技術
- **Python 3.x**
- **tkinter**: GUI フレームワーク
- **PyAutoGUI**: スクリーンショット・自動クリック
- **Pillow**: 画像処理
- **OpenCV**: 画像認識

## 📄 ライセンス

MIT License

## 🤝 貢献

プルリクエストやイシューの報告を歓迎します！